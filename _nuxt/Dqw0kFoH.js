import{I as A,bq as Ve,br as Le,A as O,aO as ne,G as j,B as F,e as I,D as K,bs as Re,d as U,f as ie,F as G,a5 as be,aL as Be,aF as oe,aP as Ke,bt as Y,bu as De,aQ as He,r as z,aH as xe,aU as N,aS as se,w as T,C as D,E as u,P as H,bv as Pe,bw as Ee,g as _e,a8 as $,aK as le,bx as Ne,o as $e,c as We,a_ as Ce,aG as we,by as je,bz as Ue,bA as Ge,bB as he,bC as Ye,K as Qe,bD as Xe,bE as Je,bF as Ze,b1 as et,bG as tt,ao as st,bH as nt}from"./DiJh2lyP.js";import{f as W}from"./CNqWek4_.js";function it(l){return A(()=>Ve(l)?!!Le(l)?.closest("form"):!0)}function ot(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}var lt=O({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(l){const n=l,{primitiveElement:e,currentElement:t}=ne(),s=A(()=>n.checked??n.value);return j(s,(i,o)=>{if(!t.value)return;const a=t.value,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"value").set;if(h&&i!==o){const y=new Event("input",{bubbles:!0}),c=new Event("change",{bubbles:!0});h.call(a,i),a.dispatchEvent(y),a.dispatchEvent(c)}}),(i,o)=>(I(),F(Re,K({ref_key:"primitiveElement",ref:e},{...n,...i.$attrs},{as:"input"}),null,16))}}),fe=lt,at=O({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(l){const n=l,e=A(()=>typeof n.value=="object"&&Array.isArray(n.value)&&n.value.length===0&&n.required),t=A(()=>typeof n.value=="string"||typeof n.value=="number"||typeof n.value=="boolean"||n.value===null||n.value===void 0?[{name:n.name,value:n.value}]:typeof n.value=="object"&&Array.isArray(n.value)?n.value.flatMap((s,i)=>typeof s=="object"?Object.entries(s).map(([o,a])=>({name:`${n.name}[${i}][${o}]`,value:a})):{name:`${n.name}[${i}]`,value:s}):n.value!==null&&typeof n.value=="object"&&!Array.isArray(n.value)?Object.entries(n.value).map(([s,i])=>({name:`${n.name}[${s}]`,value:i})):[]);return(s,i)=>(I(),U(G,null,[ie(" We render single input if it's required "),e.value?(I(),F(fe,K({key:s.name},{...n,...s.$attrs},{name:s.name,value:s.value}),null,16,["name","value"])):(I(!0),U(G,{key:1},be(t.value,o=>(I(),F(fe,K({key:o.name},{ref_for:!0},{...n,...s.$attrs},{name:o.name,value:o.value}),null,16,["name","value"]))),128))],2112))}}),rt=at;function me(l){return l?.querySelector("[data-state=checked]")}function ut(l,n,e){return l===void 0?!1:Array.isArray(l)?l.some(t=>q(t,n,e)):q(l,n,e)}function q(l,n,e){return l===void 0||n===void 0?!1:typeof l=="string"?l===n:typeof e=="function"?e(l,n):typeof e=="string"?l?.[e]===n?.[e]:Be(l,n)}const[Q,dt]=oe("ListboxRoot");var ct=O({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(l,{expose:n,emit:e}){const t=l,s=e,{multiple:i,highlightOnHover:o,orientation:a,disabled:d,selectionBehavior:v,dir:h}=Ke(t),{getItems:y}=Y({isProvider:!0}),{handleTypeaheadSearch:c}=De(),{primitiveElement:m,currentElement:f}=ne(),b=ot(),_=He(h),C=it(f),w=z(),M=z(!1),V=z(!0),x=xe(t,"modelValue",s,{defaultValue:t.defaultValue??(i.value?[]:void 0),passive:t.modelValue===void 0,deep:!0});function Ie(r){if(M.value=!0,t.multiple){const p=Array.isArray(x.value)?[...x.value]:[],g=p.findIndex(E=>q(E,r,t.by));t.selectionBehavior==="toggle"?(g===-1?p.push(r):p.splice(g,1),x.value=p):(x.value=[r],w.value=r)}else t.selectionBehavior==="toggle"&&q(x.value,r,t.by)?x.value=void 0:x.value=r;setTimeout(()=>{M.value=!1},1)}const S=z(null),X=z(null),L=z(!1),J=z(!1),ae=se(),Z=se(),re=se();function ee(){return y().map(r=>r.ref).filter(r=>r.dataset.disabled!=="")}function k(r,p=!0){if(!r)return;S.value=r,V.value&&S.value.focus(),p&&S.value.scrollIntoView({block:"nearest"});const g=y().find(E=>E.ref===r);s("highlight",g)}function Ae(r){if(L.value)re.trigger(r);else{const p=y().find(g=>q(g.value,r,t.by));p&&(S.value=p.ref,k(p.ref))}}function Fe(r){S.value&&S.value.isConnected&&(r.preventDefault(),r.stopPropagation(),J.value||S.value.click())}function Me(r){if(V.value){if(M.value=!0,L.value)Z.trigger(r);else{const p=r.altKey||r.ctrlKey||r.metaKey;if(p&&r.key==="a"&&i.value){const g=y(),E=g.map(R=>R.value);x.value=[...E],r.preventDefault(),k(g[g.length-1].ref)}else if(!p){const g=c(r.key,y());g&&k(g)}}setTimeout(()=>{M.value=!1},1)}}function ke(){J.value=!0}function Oe(){N(()=>{J.value=!1})}function ue(){N(()=>{const r=new KeyboardEvent("keydown",{key:"PageUp"});de(r)})}function te(r){const p=S.value;p?.isConnected&&(X.value=p),S.value=null,s("leave",r)}function ze(r){const p=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if(r.currentTarget?.dispatchEvent(p),s("entryFocus",p),!p.defaultPrevented)if(X.value)k(X.value);else{const g=ee()?.[0];k(g)}}function de(r){const p=Pe(r,a.value,_.value);if(!p)return;let g=ee();if(S.value){if(p==="last")g.reverse();else if(p==="prev"||p==="next"){p==="prev"&&g.reverse();const E=g.indexOf(S.value);g=g.slice(E+1)}qe(r,g[0])}if(g.length){const E=!S.value&&p==="prev"?g.length-1:0;k(g[E])}if(L.value)return Z.trigger(r)}function qe(r,p){if(!(L.value||t.selectionBehavior!=="replace"||!i.value||!Array.isArray(x.value)||(r.altKey||r.ctrlKey||r.metaKey)&&!r.shiftKey)&&r.shiftKey){const E=y().filter(P=>P.ref.dataset.disabled!=="");let R=E.find(P=>P.ref===p)?.value;if(r.key===b.END?R=E[E.length-1].value:r.key===b.HOME&&(R=E[0].value),!R||!w.value)return;const Te=W(E.map(P=>P.value),w.value,R);x.value=Te}}async function ce(r){if(await N(),L.value)ae.trigger(r);else{const p=ee(),g=p.find(E=>E.dataset.state==="checked");g?k(g):p.length&&k(p[0])}}return j(x,()=>{M.value||N(()=>{ce()})},{immediate:!0,deep:!0}),n({highlightedElement:S,highlightItem:Ae,highlightFirstItem:ue,highlightSelected:ce,getItems:y}),dt({modelValue:x,onValueChange:Ie,multiple:i,orientation:a,dir:_,disabled:d,highlightOnHover:o,highlightedElement:S,isVirtual:L,virtualFocusHook:ae,virtualKeydownHook:Z,virtualHighlightHook:re,by:t.by,firstValue:w,selectionBehavior:v,focusable:V,onLeave:te,onEnter:ze,changeHighlight:k,onKeydownEnter:Fe,onKeydownNavigation:de,onKeydownTypeAhead:Me,onCompositionStart:ke,onCompositionEnd:Oe,highlightFirstItem:ue}),(r,p)=>(I(),F(u(H),{ref_key:"primitiveElement",ref:m,as:r.as,"as-child":r.asChild,dir:u(_),"data-disabled":u(d)?"":void 0,onPointerleave:te,onFocusout:p[0]||(p[0]=async g=>{const E=g.relatedTarget||g.target;await N(),S.value&&u(f)&&!u(f).contains(E)&&te(g)})},{default:T(()=>[D(r.$slots,"default",{modelValue:u(x)}),u(C)&&r.name?(I(),F(u(rt),{key:0,name:r.name,value:u(x),disabled:u(d),required:r.required},null,8,["name","value","disabled","required"])):ie("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),Lt=ct,ht=O({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(l){const{CollectionSlot:n}=Y(),e=Q(),t=Ee(!1,10);return(s,i)=>(I(),F(u(n),null,{default:T(()=>[_e(u(H),{role:"listbox",as:s.as,"as-child":s.asChild,tabindex:u(e).focusable.value?u(e).highlightedElement.value?"-1":"0":"-1","aria-orientation":u(e).orientation.value,"aria-multiselectable":!!u(e).multiple.value,"data-orientation":u(e).orientation.value,onMousedown:i[0]||(i[0]=le(o=>t.value=!0,["left"])),onFocus:i[1]||(i[1]=o=>{u(t)||u(e).onEnter(o)}),onKeydown:[i[2]||(i[2]=$(o=>{u(e).orientation.value==="vertical"&&(o.key==="ArrowLeft"||o.key==="ArrowRight")||u(e).orientation.value==="horizontal"&&(o.key==="ArrowUp"||o.key==="ArrowDown")||(o.preventDefault(),u(e).focusable.value&&u(e).onKeydownNavigation(o))},["down","up","left","right","home","end"])),$(u(e).onKeydownEnter,["enter"]),u(e).onKeydownTypeAhead]},{default:T(()=>[D(s.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),Rt=ht,ft=O({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(l,{emit:n}){const e=l,s=xe(e,"modelValue",n,{defaultValue:"",passive:e.modelValue===void 0}),i=Q(),{primitiveElement:o,currentElement:a}=ne(),d=A(()=>e.disabled||i.disabled.value||!1),v=z();return Ne(()=>v.value=i.highlightedElement.value?.id),$e(()=>{i.focusable.value=!1,setTimeout(()=>{e.autoFocus&&a.value?.focus()},1)}),We(()=>{i.focusable.value=!0}),(h,y)=>(I(),F(u(H),{ref_key:"primitiveElement",ref:o,as:h.as,"as-child":h.asChild,value:u(s),disabled:d.value?"":void 0,"data-disabled":d.value?"":void 0,"aria-disabled":d.value??void 0,"aria-activedescendant":v.value,type:"text",onKeydown:[$(le(u(i).onKeydownNavigation,["prevent"]),["down","up","home","end"]),$(u(i).onKeydownEnter,["enter"])],onInput:y[0]||(y[0]=c=>{s.value=c.target.value,u(i).highlightFirstItem()}),onCompositionstart:u(i).onCompositionStart,onCompositionend:u(i).onCompositionEnd},{default:T(()=>[D(h.$slots,"default",{modelValue:u(s)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),Bt=ft;const[Kt,mt]=oe("ListboxGroup");var pt=O({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(l){const n=l,e=Ce(void 0,"reka-listbox-group");return mt({id:e}),(t,s)=>(I(),F(u(H),K({role:"group"},n,{"aria-labelledby":u(e)}),{default:T(()=>[D(t.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),Dt=pt;const vt="listbox.select",[gt,yt]=oe("ListboxItem");var bt=O({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(l,{emit:n}){const e=l,t=n,s=Ce(void 0,"reka-listbox-item"),{CollectionItem:i}=Y(),{forwardRef:o,currentElement:a}=we(),d=Q(),v=A(()=>a.value===d.highlightedElement.value),h=A(()=>ut(d.modelValue.value,e.value,d.by)),y=A(()=>d.disabled.value||e.disabled);async function c(f){t("select",f),!f?.defaultPrevented&&!y.value&&f&&(d.onValueChange(e.value),d.changeHighlight(a.value))}function m(f){const b={originalEvent:f,value:e.value};Ue(vt,c,b)}return yt({isSelected:h}),(f,b)=>(I(),F(u(i),{value:f.value},{default:T(()=>[je([v.value,h.value],()=>_e(u(H),K({id:u(s)},f.$attrs,{ref:u(o),role:"option",tabindex:u(d).focusable.value?v.value?"0":"-1":-1,"aria-selected":h.value,as:f.as,"as-child":f.asChild,disabled:y.value?"":void 0,"data-disabled":y.value?"":void 0,"data-highlighted":v.value?"":void 0,"data-state":h.value?"checked":"unchecked",onClick:m,onKeydown:$(le(m,["prevent"]),["space"]),onPointermove:b[0]||(b[0]=()=>{u(d).highlightedElement.value!==u(a)&&u(d).highlightOnHover.value&&!u(d).focusable.value&&u(d).changeHighlight(u(a),!1)})}),{default:T(()=>[D(f.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),b,1)]),_:3},8,["value"]))}}),Ht=bt,xt=O({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(l){const n=l;we();const e=gt();return(t,s)=>u(e).isSelected.value?(I(),F(u(H),K({key:0,"aria-hidden":"true"},n),{default:T(()=>[D(t.$slots,"default")]),_:3},16)):ie("v-if",!0)}}),Pt=xt;function B(l,n,e){let t=e.initialDeps??[],s;function i(){var o,a,d,v;let h;e.key&&((o=e.debug)!=null&&o.call(e))&&(h=Date.now());const y=l();if(!(y.length!==t.length||y.some((f,b)=>t[b]!==f)))return s;t=y;let m;if(e.key&&((a=e.debug)!=null&&a.call(e))&&(m=Date.now()),s=n(...y),e.key&&((d=e.debug)!=null&&d.call(e))){const f=Math.round((Date.now()-h)*100)/100,b=Math.round((Date.now()-m)*100)/100,_=b/16,C=(w,M)=>{for(w=String(w);w.length<M;)w=" "+w;return w};console.info(`%c⏱ ${C(b,5)} /${C(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*_,120))}deg 100% 31%);`,e?.key)}return(v=e?.onChange)==null||v.call(e,s),s}return i.updateDeps=o=>{t=o},i}function pe(l,n){if(l===void 0)throw new Error("Unexpected undefined");return l}const Et=(l,n)=>Math.abs(l-n)<1.01,_t=(l,n,e)=>{let t;return function(...s){l.clearTimeout(t),t=l.setTimeout(()=>n.apply(this,s),e)}},ve=l=>{const{offsetWidth:n,offsetHeight:e}=l;return{width:n,height:e}},Ct=l=>l,wt=l=>{const n=Math.max(l.startIndex-l.overscan,0),e=Math.min(l.endIndex+l.overscan,l.count-1),t=[];for(let s=n;s<=e;s++)t.push(s);return t},St=(l,n)=>{const e=l.scrollElement;if(!e)return;const t=l.targetWindow;if(!t)return;const s=o=>{const{width:a,height:d}=o;n({width:Math.round(a),height:Math.round(d)})};if(s(ve(e)),!t.ResizeObserver)return()=>{};const i=new t.ResizeObserver(o=>{const a=()=>{const d=o[0];if(d?.borderBoxSize){const v=d.borderBoxSize[0];if(v){s({width:v.inlineSize,height:v.blockSize});return}}s(ve(e))};l.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()});return i.observe(e,{box:"border-box"}),()=>{i.unobserve(e)}},ge={passive:!0},ye=typeof window>"u"?!0:"onscrollend"in window,It=(l,n)=>{const e=l.scrollElement;if(!e)return;const t=l.targetWindow;if(!t)return;let s=0;const i=l.options.useScrollendEvent&&ye?()=>{}:_t(t,()=>{n(s,!1)},l.options.isScrollingResetDelay),o=h=>()=>{const{horizontal:y,isRtl:c}=l.options;s=y?e.scrollLeft*(c&&-1||1):e.scrollTop,i(),n(s,h)},a=o(!0),d=o(!1);d(),e.addEventListener("scroll",a,ge);const v=l.options.useScrollendEvent&&ye;return v&&e.addEventListener("scrollend",d,ge),()=>{e.removeEventListener("scroll",a),v&&e.removeEventListener("scrollend",d)}},At=(l,n,e)=>{if(n?.borderBoxSize){const t=n.borderBoxSize[0];if(t)return Math.round(t[e.options.horizontal?"inlineSize":"blockSize"])}return l[e.options.horizontal?"offsetWidth":"offsetHeight"]},Ft=(l,{adjustments:n=0,behavior:e},t)=>{var s,i;const o=l+n;(i=(s=t.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[t.options.horizontal?"left":"top"]:o,behavior:e})};class Mt{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const t=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=t())==null||s.disconnect(),e=null},observe:s=>{var i;return(i=t())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=t())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([t,s])=>{typeof s>"u"&&delete e[t]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Ct,rangeExtractor:wt,onChange:()=>{},measureElement:At,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var t,s;(s=(t=this.options).onChange)==null||s.call(t,this,e)},this.maybeNotify=B(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const t=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==t){if(this.cleanup(),!t){this.maybeNotify();return}this.scrollElement=t,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,t)=>{const s=new Map,i=new Map;for(let o=t-1;o>=0;o--){const a=e[o];if(s.has(a.lane))continue;const d=i.get(a.lane);if(d==null||a.end>d.end?i.set(a.lane,a):a.end<d.end&&s.set(a.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,a)=>o.end===a.end?o.index-a.index:o.end-a.end)[0]:void 0},this.getMeasurementOptions=B(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,t,s,i,o)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:t,scrollMargin:s,getItemKey:i,enabled:o}),{key:!1}),this.getMeasurements=B(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:t,scrollMargin:s,getItemKey:i,enabled:o},a)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(h=>{this.itemSizeCache.set(h.key,h.size)}));const d=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const v=this.measurementsCache.slice(0,d);for(let h=d;h<e;h++){const y=i(h),c=this.options.lanes===1?v[h-1]:this.getFurthestMeasurement(v,h),m=c?c.end+this.options.gap:t+s,f=a.get(y),b=typeof f=="number"?f:this.options.estimateSize(h),_=m+b,C=c?c.lane:h%this.options.lanes;v[h]={index:h,start:m,size:b,end:_,key:y,lane:C}}return this.measurementsCache=v,v},{key:!1,debug:()=>this.options.debug}),this.calculateRange=B(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,t,s,i)=>this.range=e.length>0&&t>0?kt({measurements:e,outerSize:t,scrollOffset:s,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=B(()=>{let e=null,t=null;const s=this.calculateRange();return s&&(e=s.startIndex,t=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,t]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,t]},(e,t,s,i,o)=>i===null||o===null?[]:e({startIndex:i,endIndex:o,overscan:t,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const t=this.options.indexAttribute,s=e.getAttribute(t);return s?parseInt(s,10):(console.warn(`Missing attribute name '${t}={index}' on measured element.`),-1)},this._measureElement=(e,t)=>{const s=this.indexFromElement(e),i=this.measurementsCache[s];if(!i)return;const o=i.key,a=this.elementsCache.get(o);a!==e&&(a&&this.observer.unobserve(a),this.observer.observe(e),this.elementsCache.set(o,e)),e.isConnected&&this.resizeItem(s,this.options.measureElement(e,t,this))},this.resizeItem=(e,t)=>{const s=this.measurementsCache[e];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=t-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,t)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((t,s)=>{t.isConnected||(this.observer.unobserve(t),this.elementsCache.delete(s))});return}this._measureElement(e,void 0)},this.getVirtualItems=B(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,t)=>{const s=[];for(let i=0,o=e.length;i<o;i++){const a=e[i],d=t[a];s.push(d)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const t=this.getMeasurements();if(t.length!==0)return pe(t[Se(0,t.length-1,s=>pe(t[s]).start,e)])},this.getOffsetForAlignment=(e,t,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();t==="auto"&&(t=e>=o+i?"end":"start"),t==="center"?e+=(s-i)/2:t==="end"&&(e-=i);const a=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(a,e),0)},this.getOffsetForIndex=(e,t="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const s=this.measurementsCache[e];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(t==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)t="end";else if(s.start<=o+this.options.scrollPaddingStart)t="start";else return[o,t];const a=t==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(a,t,s.size),t]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:t="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,t),{adjustments:void 0,behavior:s})},this.scrollToIndex=(e,{align:t="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e=Math.max(0,Math.min(e,this.options.count-1));let i=0;const o=10,a=v=>{if(!this.targetWindow)return;const h=this.getOffsetForIndex(e,v);if(!h){console.warn("Failed to get offset for index:",e);return}const[y,c]=h;this._scrollToOffset(y,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const m=this.getScrollOffset(),f=this.getOffsetForIndex(e,c);if(!f){console.warn("Failed to get offset for index:",e);return}Et(f[0],m)||d(c)})},d=v=>{this.targetWindow&&(i++,i<o?this.targetWindow.requestAnimationFrame(()=>a(v)):console.warn(`Failed to scroll to index ${e} after ${o} attempts.`))};a(t)},this.scrollBy=(e,{behavior:t}={})=>{t==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:t})},this.getTotalSize=()=>{var e;const t=this.getMeasurements();let s;if(t.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((e=t[t.length-1])==null?void 0:e.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=t.length-1;for(;o>=0&&i.some(a=>a===null);){const a=t[o];i[a.lane]===null&&(i[a.lane]=a.end),o--}s=Math.max(...i.filter(a=>a!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:t,behavior:s})=>{this.options.scrollToFn(e,{behavior:s,adjustments:t},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(n)}}const Se=(l,n,e,t)=>{for(;l<=n;){const s=(l+n)/2|0,i=e(s);if(i<t)l=s+1;else if(i>t)n=s-1;else return s}return l>0?l-1:0};function kt({measurements:l,outerSize:n,scrollOffset:e,lanes:t}){const s=l.length-1,i=d=>l[d].start;if(l.length<=t)return{startIndex:0,endIndex:s};let o=Se(0,s,i,e),a=o;if(t===1)for(;a<s&&l[a].end<e+n;)a++;else if(t>1){const d=Array(t).fill(0);for(;a<s&&d.some(h=>h<e+n);){const h=l[a];d[h.lane]=h.end,a++}const v=Array(t).fill(e+n);for(;o>=0&&v.some(h=>h>=e);){const h=l[o];v[h.lane]=h.start,o--}o=Math.max(0,o-o%t),a=Math.min(s,a+(t-1-a%t))}return{startIndex:o,endIndex:a}}function Ot(l){const n=new Mt(u(l)),e=Ge(n),t=n._didMount();return j(()=>u(l).getScrollElement(),s=>{s&&n._willUpdate()},{immediate:!0}),j(()=>u(l),s=>{n.setOptions({...s,onChange:(i,o)=>{var a;he(e),(a=s.onChange)==null||a.call(s,i,o)}}),n._willUpdate(),he(e)},{immediate:!0}),Ye(t),e}function zt(l){return Ot(A(()=>({observeElementRect:St,observeElementOffset:It,scrollToFn:Ft,...u(l)})))}var qt=O({__name:"ListboxVirtualizer",props:{options:{type:Array,required:!0},overscan:{type:Number,required:!1},estimateSize:{type:Number,required:!1},textContent:{type:Function,required:!1}},setup(l){const n=l,e=Qe(),t=Q(),s=Xe(),{getItems:i}=Y();t.isVirtual.value=!0;const o=A(()=>{const c=s.value;if(c){const m=window.getComputedStyle(c);return{start:Number.parseFloat(m.paddingBlockStart||m.paddingTop),end:Number.parseFloat(m.paddingBlockEnd||m.paddingBottom)}}else return{start:0,end:0}}),a=zt({get scrollPaddingStart(){return o.value.start},get scrollPaddingEnd(){return o.value.end},get count(){return n.options.length},get horizontal(){return t.orientation.value==="horizontal"},estimateSize(){return n.estimateSize??28},getScrollElement(){return s.value},overscan:n.overscan??12}),d=A(()=>a.value.getVirtualItems().map(c=>{const m=e.default({option:n.options[c.index],virtualizer:a.value,virtualItem:c})[0],f=m.type===G&&Array.isArray(m.children)?m.children[0]:m;return{item:c,is:Je(f,{key:`${c.key}`,"data-index":c.index,"aria-setsize":n.options.length,"aria-posinset":c.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${c.start}px)`,overflowAnchor:"none"}})}}));t.virtualFocusHook.on(c=>{const m=n.options.findIndex(f=>Array.isArray(t.modelValue.value)?q(f,t.modelValue.value[0],t.by):q(f,t.modelValue.value,t.by));m!==-1?(c?.preventDefault(),a.value.scrollToIndex(m,{align:"start"}),requestAnimationFrame(()=>{const f=me(s.value);f&&(t.changeHighlight(f),c&&f?.focus())})):t.highlightFirstItem()}),t.virtualHighlightHook.on(c=>{const m=n.options.findIndex(f=>q(f,c,t.by));a.value.scrollToIndex(m,{align:"start"}),requestAnimationFrame(()=>{const f=me(s.value);f&&t.changeHighlight(f)})});const v=Ee("",1e3),h=A(()=>{const c=m=>n.textContent?n.textContent(m):m?.toString().toLowerCase();return n.options.map((m,f)=>({index:f,textContent:c(m)}))});function y(c,m){if(!t.firstValue?.value||!t.multiple.value||!Array.isArray(t.modelValue.value))return;const b=i().filter(C=>C.ref.dataset.disabled!=="").find(C=>C.ref===t.highlightedElement.value)?.value;if(!b)return;let _=null;switch(m){case"prev":case"next":{_=W(n.options,t.firstValue.value,b);break}case"first":{_=W(n.options,t.firstValue.value,n.options?.[0]);break}case"last":{_=W(n.options,t.firstValue.value,n.options?.[n.options.length-1]);break}}t.modelValue.value=_}return t.virtualKeydownHook.on(c=>{const m=c.altKey||c.ctrlKey||c.metaKey;if(c.key==="Tab"&&!m)return;let b=Ze[c.key];if(m&&c.key==="a"&&t.multiple.value?(c.preventDefault(),t.modelValue.value=[...n.options],b="last"):c.shiftKey&&b&&y(c,b),["first","last"].includes(b)){c.preventDefault();const _=b==="first"?0:n.options.length-1;a.value.scrollToIndex(_),requestAnimationFrame(()=>{const C=i(),w=b==="first"?C[0]:C[C.length-1];w&&t.changeHighlight(w.ref)})}else if(!b&&!m){v.value+=c.key;const _=Number(et()?.getAttribute("data-index")),C=h.value[_].textContent,w=h.value.map(x=>x.textContent??""),M=tt(w,v.value,C),V=h.value.find(x=>x.textContent===M);V&&(a.value.scrollToIndex(V.index,{align:"start"}),requestAnimationFrame(()=>{const x=s.value.querySelector(`[data-index="${V.index}"]`);x instanceof HTMLElement&&t.changeHighlight(x)}))}}),(c,m)=>(I(),U("div",{"data-reka-virtualizer":"",style:nt({position:"relative",width:"100%",height:`${u(a).getTotalSize()}px`})},[(I(!0),U(G,null,be(d.value,({is:f,item:b})=>(I(),F(st(f),{key:b.index}))),128))],4))}}),Nt=qt;export{Ht as L,rt as V,Pt as a,Bt as b,Rt as c,Nt as d,Dt as e,Lt as f,Q as g,Kt as i,it as u};
